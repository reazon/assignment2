<html>
<head>
<style type="text/css">
pre {font-family: monospace;}
</style>
</head>
<body>
<div>
<ul>
  <li><a href="#newasnn">Creating a new Assignment</a></li>
  <li><a href="#loadasnn">Loading an existing assignment</a></li>
  <li><a href="#editasnn">Editing an existing assignment</a></li>
  <li><a href="#submitasnn">Submitting an assignment</a></li>
  <li><a href="#checkstatusasnn">Checking assignment status (after submitted)</a></li>
  <li><a href="#instviewurlasnn">Constructing URL for Instructor to View Report</a></li>
  <li><a href="#studviewurlasnn">Constructing URL for Student to View Report</a></li>
</ul>
</div>
<div>
<h1><a name="newasnn">Creating a new Assignment</a></h1>
<pre>
2009-11-23 13:02:50,205 DEBUG http-8080-Processor22 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/d1a1da81-d2a7-48de-bc76-3b8558bc5029
assignid = /asnn2contentreview/d1a1da81-d2a7-48de-bc76-3b8558bc5029
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
encrypt = 0
fcmd = 7
fid = 4
gmtime = 20091123180
said = 67890
src = 9
uem = sgithens@googlemail.com
ufn = Sakai
uid = admin
uln = Administrator
username = Sakai Administrator
utp = 2
md5 = 26cd8d2bf00769307ea675a4c44a8ff6
2009-11-23 13:02:50,505 DEBUG http-8080-Processor22 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Turnitin Result Payload: {rmessage=Assignment does not exist in Turnitin database for this class.  The assignment may have been deleted., rcode=206}

2009-11-23 13:02:50,641 DEBUG http-8080-Processor22 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/d1a1da81-d2a7-48de-bc76-3b8558bc5029
assignid = /asnn2contentreview/d1a1da81-d2a7-48de-bc76-3b8558bc5029
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
dtdue = 20091122
dtstart = 20091122
encrypt = 0
fcmd = 2
fid = 4
gmtime = 20091123180
institution_check = 1
internet_check = 1
journal_check = 1
report_gen_speed = 0
s_paper_check = 1
s_view_report = 0
said = 67890
src = 9
submit_papers_to = 0
uem = sgithens@googlemail.com
ufn = Sakai
uid = admin
uln = Administrator
username = Sakai Administrator
utp = 2
md5 = 5f1701f78218d9432e676ca0a9c1a044
2009-11-23 13:02:50,932 DEBUG http-8080-Processor22 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Create FirstDate Assignment successful
2009-11-23 13:02:50,932 DEBUG http-8080-Processor22 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - tii returned Successful!. Code: 41


2009-11-23 13:02:52,066 DEBUG http-8080-Processor22 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/d1a1da81-d2a7-48de-bc76-3b8558bc5029
assignid = /asnn2contentreview/d1a1da81-d2a7-48de-bc76-3b8558bc5029
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
dtdue = 20100422
dtstart = 20091123
encrypt = 0
fcmd = 3
fid = 4
gmtime = 20091123180
institution_check = 1
internet_check = 1
journal_check = 1
report_gen_speed = 0
s_paper_check = 1
s_view_report = 0
said = 67890
src = 9
submit_papers_to = 0
uem = sgithens@googlemail.com
ufn = Sakai
uid = admin
uln = Administrator
username = Sakai Administrator
utp = 2
md5 = 25d675b16e0e8d2f532e24f680134429
2009-11-23 13:02:52,494 DEBUG http-8080-Processor22 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Create Assignment successful
2009-11-23 13:02:52,494 DEBUG http-8080-Processor22 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - tii returned Successful!. Code: 42
</pre>
</div>

<div>
<h1><a name="loadasnn">Loading an existing assignment</a></h1>
<pre>
2009-11-23 13:13:32,401 DEBUG http-8080-Processor22 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a
assignid = /asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
encrypt = 0
fcmd = 7
fid = 4
gmtime = 20091123181
said = 67890
src = 9
uem = sgithens@googlemail.com
ufn = Sakai
uid = admin
uln = Administrator
username = Sakai Administrator
utp = 2
md5 = bcfcb780ddc4fa9f96ac2d8b98ad694d
2009-11-23 13:13:32,763 DEBUG http-8080-Processor22 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Turnitin Result Payload: {object={assign=/asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a, maxpoints=0, dtstart=2009-11-13 00:00:00-08, dtdue=2010-04-12 23:59:59-07, dtpost=2010-04-12 23:59:59-07, ainst=null, userubrics=0, draft=0, generate=0, sviewreports=0, latesubmissions=0, repository=0, searchpapers=1, searchinternet=1, searchjournals=1, searchinstitution=1, anon=0}, rcode=85, rmessage=Successful!}
</pre>
</div>

<div>
<h1><a name="editasnn">Editing an existing assignment</a></h1>
<pre>
2009-11-23 13:15:40,037 DEBUG http-8080-Processor25 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a
assignid = /asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
encrypt = 0
fcmd = 7
fid = 4
gmtime = 20091123181
said = 67890
src = 9
uem = sgithens@googlemail.com
ufn = Sakai
uid = admin
uln = Administrator
username = Sakai Administrator
utp = 2
md5 = bcfcb780ddc4fa9f96ac2d8b98ad694d
2009-11-23 13:15:40,233 DEBUG http-8080-Processor25 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Turnitin Result Payload: {object={assign=/asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a, maxpoints=0, dtstart=2009-11-13 00:00:00-08, dtdue=2010-04-12 23:59:59-07, dtpost=2010-04-12 23:59:59-07, ainst=null, userubrics=0, draft=0, generate=0, sviewreports=0, latesubmissions=0, repository=0, searchpapers=1, searchinternet=1, searchjournals=1, searchinstitution=1, anon=0}, rcode=85, rmessage=Successful!}
2009-11-23 13:15:40,233 DEBUG http-8080-Processor25 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Assign title is /asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a


2009-11-23 13:15:40,370 DEBUG http-8080-Processor25 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a
assignid = /asnn2contentreview/30d19d66-8584-4b1a-a831-25d387c4b15a
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
dtdue = 20100422
dtstart = 20091113
encrypt = 0
fcmd = 3
fid = 4
gmtime = 20091123181
institution_check = 1
internet_check = 0
journal_check = 1
report_gen_speed = 0
s_paper_check = 1
s_view_report = 0
said = 67890
src = 9
submit_papers_to = 0
uem = sgithens@googlemail.com
ufn = Sakai
uid = admin
uln = Administrator
username = Sakai Administrator
utp = 2
md5 = 8e4f4c6e4eed8aae5957d809558912c5
2009-11-23 13:15:40,673 DEBUG http-8080-Processor25 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Create Assignment successful
2009-11-23 13:15:40,673 DEBUG http-8080-Processor25 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - tii returned Successful!. Code: 42

</pre>
</div>

<div>
<h1><a name="submitasnn">Submitting an assignment</a></h1>
<p>The first call is enrolling the student in the class, the second call is
actually submitting the assignment. Both these calls are handled asyncronously
by cron/quartz jobs and do not happen when the student is actually at the user
interface.</p>
<pre>
2009-12-17 12:45:16,279 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Processing submission queue
2009-12-17 12:45:16,296 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Attempting to submit content: /attachment/tiitestsite-12347/AsnnBeta/16ba7a7e-743c-46e9-a3e9-1298f3a567b2/About Stacks.pdf for user: d721a649-43cc-4f68-b1aa-3945009e9b36 and site: tiitestsite-12347
2009-12-17 12:45:16,299 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Looking for email for stud02 with prefer system profile email set to true
2009-12-17 12:45:16,299 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - try system profile email first
2009-12-17 12:45:16,319 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Enrolling user stud02(d721a649-43cc-4f68-b1aa-3945009e9b36)  in class tiitestsite-12347

2009-12-17 12:45:16,453 DEBUG http-8080-Processor20 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
dis = 0
encrypt = 0
fcmd = 2
fid = 3
gmtime = 20091217174
said = 67890
src = 9
tem = tiitestsite-12347_12345@tiisakai.com
uem = sasdfsafud@two.org
ufn = stud
uid = d721a649-43cc-4f68-b1aa-3945009e9b36
uln = two
utp = 1
md5 = 0b8fbde237a3df34346385f3f103829a
2009-12-17 12:45:16,705 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Results from enrollInClass with user + d721a649-43cc-4f68-b1aa-3945009e9b36 and class title: tiitestsite-12347.
rCode: 31 rMessage: Successful!
2009-12-17 12:45:16,706 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - origional filename is: About Stacks.pdf
2009-12-17 12:45:16,707 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - fileName is :About Stacks.pdf
2009-12-17 12:45:16,707 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - fileName is :About_Stacks.pdf
2009-12-17 12:45:16,707  WARN http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Using Emails: tem: tiitestsite-12347_12345@tiisakai.com uem: sasdfsafud@two.org

2009-12-17 12:45:16,843 DEBUG http-8080-Processor20 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting Multipart TII CALL:
aid = 12345
assign = /asnn2contentreview/c8818111-b787-4c9c-883f-49f23d079b90
assignid = /asnn2contentreview/c8818111-b787-4c9c-883f-49f23d079b90
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
dis = 0
encrypt = 0
fcmd = 2
fid = 5
gmtime = 20091217174
ptl = stud02:About_Stacks.pdf
ptype = 2
resource_obj = ContentHostingResource: /attachment/tiitestsite-12347/AsnnBeta/16ba7a7e-743c-46e9-a3e9-1298f3a567b2/About Stacks.pdf
said = 67890
src = 9
tem = tiitestsite-12347_12345@tiisakai.com
uem = sasdfsafud@two.org
ufn = stud
uid = d721a649-43cc-4f68-b1aa-3945009e9b36
uln = two
utp = 1
md5 = a28f2733caa1360e79db3e41499ba0d0

2009-12-17 12:45:18,737 DEBUG http-8080-Processor20 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Submission successful
</pre>

</div>

<div>
<h1><a name="checkstatusasnn">Checking assignment status (after submitted)</a></h1>
<p>When checking for a reports status, we fetch the assignment information and
then use fid10fcmd2 in the second call to get the report information if 
available. We currently use bulk mode, but some institutions may use individual 
mode.</p>
<pre>
2009-12-17 12:52:18,120 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Checking for updated reports from Turnitin in bulk mode
2009-12-17 12:52:18,126 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - There are 1 submissions awaiting reports
2009-12-17 12:52:18,126  INFO http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Still have retries left, continuing. ItemID: 7
2009-12-17 12:52:18,126 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Attempting to update hashtable with reports for site tiitestsite-12347

2009-12-17 12:52:18,260 DEBUG http-8080-Processor23 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/c8818111-b787-4c9c-883f-49f23d079b90
assignid = /asnn2contentreview/c8818111-b787-4c9c-883f-49f23d079b90
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
encrypt = 0
fcmd = 7
fid = 4
gmtime = 20091217175
said = 67890
src = 9
uem = tiitestsite-12347_12345@tiisakai.com
ufn = Sakai
uid = 16905909
uln = Instructor
username = 2
utp = 2
md5 = d5bc13aadc4e23eb94b2356b195c7cb4
2009-12-17 12:52:18,456 DEBUG http-8080-Processor23 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Turnitin Result Payload: {object={assign=/asnn2contentreview/c8818111-b787-4c9c-883f-49f23d079b90, maxpoints=0, dtstart=2009-12-17 00:00:00-08, dtdue=2010-05-16 23:59:59-07, dtpost=2010-05-16 23:59:59-07, ainst=null, userubrics=0, draft=0, generate=0, sviewreports=0, latesubmissions=0, repository=0, searchpapers=1, searchinternet=1, searchjournals=1, searchinstitution=1, anon=0}, rcode=85, rmessage=Successful!}
2009-12-17 12:52:18,456  INFO http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Incrementing retry count for currentItem: 7

2009-12-17 12:52:18,592 DEBUG http-8080-Processor23 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting TII CALL:
aid = 12345
assign = /asnn2contentreview/c8818111-b787-4c9c-883f-49f23d079b90
assignid = /asnn2contentreview/c8818111-b787-4c9c-883f-49f23d079b90
cid = tiitestsite-12347
ctl = tiitestsite-12347
diagnostic = 0
encrypt = 0
fcmd = 2
fid = 10
gmtime = 20091217175
said = 67890
src = 9
tem = tiitestsite-12347_12345@tiisakai.com
uem = tiitestsite-12347_12345@tiisakai.com
ufn = Sakai
uid = 16905909
uln = Instructor
utp = 2
md5 = 07ae488c149450d48aba02a7748195dc
2009-12-17 12:52:18,866 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - Report list returned successfully
2009-12-17 12:52:18,866 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - 1 objects in the returned list
2009-12-17 12:52:18,866 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - objectId: 118958718 similarity: 4 overlap: 100
2009-12-17 12:52:18,866 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - reportVal for 118958718: 100
2009-12-17 12:52:18,869 DEBUG http-8080-Processor23 org.sakaiproject.contentreview.impl.turnitin.TurnitinReviewServiceImpl - new report received: 118958718 -> 100

</pre>
</div>

<div>
<h1><a name="instviewurlasnn">Constructing URL for Instructor to View Report</a></h1>
<pre>
2009-12-17 12:55:14,065 DEBUG http-8080-Processor22 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting URL TII Construction:
The TII Base URL is:
https://www.turnitin.com/api.asp?aid=12345
assignid = tiitestsite-12347
cid = tiitestsite-12347
diagnostic = 0
encrypt = 0
fcmd = 1
fid = 6
gmtime = 20091217175
oid = 118958718
said = 67890
src = 9
uem = adfasfinst01@demo.edu
ufn = Inst
uid = c7a4be4f-1000-4849-8f0f-376a5d6ce641
uln = One
username = Inst One
utp = 2
md5 = a24e476367e715c0b12dabf2f02a880b
</pre>
</div>

<div>
<h1><a name="studviewurlasnn">Constructing URL for Student to View Report</a></h1>
<pre>
2009-12-17 12:58:55,009 DEBUG http-8080-Processor25 org.sakaiproject.turnitin.util.TurnitinAPIUtil.apicalltrace - Starting URL TII Construction:
The TII Base URL is:
https://www.turnitin.com/api.asp?aid=12345
assignid = tiitestsite-12347
cid = tiitestsite-12347
diagnostic = 0
encrypt = 0
fcmd = 1
fid = 6
gmtime = 20091217175
oid = 118958718
said = 67890
src = 9
uem = sasdfsafud@two.org
ufn = stud
uid = d721a649-43cc-4f68-b1aa-3945009e9b36
uln = two
utp = 1
md5 = b9abfb6e263d032dd47ddb5060811d64
</pre>
</div>
</body>
</html>
