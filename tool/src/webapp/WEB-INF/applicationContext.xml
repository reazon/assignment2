<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
	"http://www.springframework.org/dtd/spring-beans.dtd">

<!-- This file generated by Sakai App Builder -->
<beans>

<!--   
   <bean id="messageRenderer" class="org.sakaiproject.assignment2.tool.beans.Assignments2MessageRenderer">
      <property name="messageLocator">
         <ref bean="messageLocator" />
      </property>
      <property name="infoStyleClass" value="success" />
      <property name="errorStyleClass" value="alertMessageInline" />
   </bean>
-->
   
   <bean id="LocalPermissionLogic" class="org.sakaiproject.assignment2.tool.beans.locallogic.LocalPermissionLogic">
   	  <property name="permissionLogic" ref="org.sakaiproject.assignment2.logic.AssignmentPermissionLogic" />
   	  <property name="externalLogic" ref="org.sakaiproject.assignment2.logic.ExternalLogic" />
   	  <property name="submissionLogic" ref="org.sakaiproject.assignment2.logic.AssignmentSubmissionLogic" />
   </bean>
   
   <bean id="localAssignmentLogic" class="org.sakaiproject.assignment2.tool.beans.locallogic.LocalAssignmentLogic">
   </bean>
   
   <bean id="Assignment2DetailEntityProvider" class="org.sakaiproject.assignment2.tool.entity.Assignment2DetailEntityProvider"
      init-method="init" destroy-method="destroy">
      <property name="entityProviderManager" ref="org.sakaiproject.entitybroker.entityprovider.EntityProviderManager" />
   </bean>

   <!-- handles configuration of internationalization messages -->
   <bean id="messageLocator" class="uk.org.ponder.springutil.SpringMessageLocator">
      <property name="messageSource">
         <bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
            <property name="basename">
               <value>WEB-INF/classes/bundle/messages</value>
            </property>
            <property name="cacheSeconds">
               <value>10</value>
            </property>
         </bean>
      </property>
      <property name="localeGetter" ref="requestLocaleProxy" />
   </bean>
  
   <!--  Handles incoming views to filter based on permissions  -->
   <bean parent="viewParamsInterceptorParent">
   	  <property name="value">
   	     <bean id="Assignment2ViewParamsInterceptor" class="org.sakaiproject.assignment2.tool.params.Assignment2ViewParamsInterceptor">
   	     	 <property name="localPermissionLogic" ref="LocalPermissionLogic" />
   	     </bean>
   	  </property>
   </bean>

   <!-- Define the bean roots from the request scope file that are accessible 
    via incoming request URL -->
   <bean parent="requestAddressibleParent">
	  <property name="value" value="Assignment2,Assignment2Bean,AssignmentSubmission,AssignmentSubmissionBean,FilePickerBean,AssignmentSubmissionVersion,uploadBean,AttachmentBean"/>
   </bean>

   <!-- Override the default style of user messages -->
   <bean id="messageTemplateContributor" parent="templateContributorParent">
      <property name="baseDirectory" value="component-templates/" />
      <property name="templateNames" value="Messages,Pager,SortHeader,AttachmentList,GradebookDetails,StudentViewAssignment" />
   </bean>
   
   <!-- Register the template "layout.html" as defining root layout for
       each page in the application (extension is auto-inferred from view type),
       base directory is defaulted from "defaultTemplatePath" -> content/templates/ -->
  	<bean parent="rootTemplateContributorParent">
    	<property name="templateNames" value="Layout"/>
  	</bean>
 
  	<bean id="HTMLViewGroup" class="uk.org.ponder.rsf.view.ViewGroup">
  		<property name="contentTypeSpec" value="HTML,HTML-FRAGMENT" />
  	</bean>
   
   <!-- The beans listed here are session beans (they stick around) -->
	<bean id="myBeanScope" parent="beanScopeParent">
		<property name="copyPreservingBeans" value="PreviewAssignmentBean,PreviewAssignmentSubmissionBean,AttachmentBean" />
		<property name="exclusive" value="true" />
	</bean>
	
	<bean id="Assignment2Creator"
		class="org.sakaiproject.assignment2.tool.beans.Assignment2Creator">
		<property name="externalLogic" ref="org.sakaiproject.assignment2.logic.ExternalLogic" />
		<property name="messageLocator" ref="messageLocator" />
	</bean>
   
   <bean id="Assignment2" parent="entityBeanLocatorParent">
      <property name="newMethod" 
      	value="Assignment2Creator.create" />
      <property name="fetchMethod"
      	value="org\.sakaiproject\.assignment2\.logic\.AssignmentLogic.getAssignmentByIdWithAssociatedData" />
      <property name="saveMethod"
        value="org\.sakaiproject\.assignment2\.logic\.AssignmentLogic.saveAssignment" />
      <property name="removeMethod"
        value="org\.sakaiproject\.assignment2\.logic\.AssignmentLogic.deleteAssignment" />
   </bean>
   
   <bean id="AssignmentSubmissionCreator"
   	  class="org.sakaiproject.assignment2.tool.beans.AssignmentSubmissionCreator">
   	  <property name="externalLogic" ref="org.sakaiproject.assignment2.logic.ExternalLogic" />
   </bean>
   
   <bean id="AssignmentSubmission" parent="entityBeanLocatorParent">
      <property name="newMethod"
      	value="AssignmentSubmissionCreator.create" />
      <property name="fetchMethod"
        value="org\.sakaiproject\.assignment2\.logic\.AssignmentSubmissionLogic.getAssignmentSubmissionById" />
      <property name="saveMethod"
      	value="org\.sakaiproject\.assignment2\.logic\.AssignmentSubmissionLogic.saveAssignmentSubmission" />
      <property name="removeMethod"
      	value="org\.sakaiproject\.assignment2\.logic\.AssignmentSubmissionLogic.deleteAssignmentSubmission" />   
   </bean>
   
   <bean id="AssignmentSubmissionVersionCreator" class="org.sakaiproject.assignment2.tool.beans.AssignmentSubmissionVersionCreator">
   </bean>
   
   <bean id="AssignmentSubmissionVersion" parent="entityBeanLocatorParent">
   	  <property name="newMethod" value="AssignmentSubmissionVersionCreator.create" />
   	  <property name="fetchMethod"
   	  	value="org\.sakaiproject\.assignment2\.logic\.AssignmentSubmissionLogic.getSubmissionVersionById" />
   	  <property name="saveMethod"
   	  	value="org\.sakaiproject\.assignment2\.logic\.AssignmentSubmissionLogic.saveInstructorFeedback" />
   </bean>

	<bean parent="handlerHookParent">
		<property name="value">
			<bean parent="RSACBridgeProxy">
				<property name="targetBeanName" value="zipHandlerHook" />
			</bean>
		</property>
	</bean>

	<bean id="zipSubmissionsBean" parent="viewParamsRegistrarParent">
		<property name="viewID" value="zipSubmissions"/>
		<property name="viewParamsClass" value="org.sakaiproject.assignment2.tool.params.ZipViewParams" />
	</bean>

	<!-- Use RSF's "BeanGuard" validation scheme to trap all write accesses to a
    Assignment2 entity -->
	<!-- 
  <bean parent="writeGuardParent">
    <property name="guardedPath" value="Assignment2.*" />
    <property name="guardMethod" value="Assignment2Validator.assignment" />
  </bean>
	-->
</beans>
